{"is_source_file": true, "format": "JavaScript", "description": "This file defines a Notes API client that interacts with a backend server via HTTP requests or falls back to using localStorage if the backend is not configured or fails. It provides functions to list, create, update, and delete notes, handling data normalization and supporting both remote and local data storage mechanisms.", "external_files": [], "external_methods": ["fetch"], "published": ["listNotes", "createNote", "updateNote", "deleteNote"], "classes": [], "methods": [{"name": "getApiBase()", "description": "Retrieves the base URL for the API from environment variables.", "scope": "", "scopeKind": ""}, {"name": "isBackendConfigured()", "description": "Checks if the backend URL is configured based on environment variables.", "scope": "", "scopeKind": ""}, {"name": "http(method, path, body)", "description": "Performs an HTTP request with specified method, path, and optional body; handles errors.", "scope": "", "scopeKind": ""}, {"name": "readLocal()", "description": "Reads notes from localStorage, normalizes them, and returns the list.", "scope": "", "scopeKind": ""}, {"name": "writeLocal(list)", "description": "Writes a list of notes to localStorage.", "scope": "", "scopeKind": ""}, {"name": "normalizeNote(n)", "description": "Normalizes a note object to ensure consistent structure and data types.", "scope": "", "scopeKind": ""}, {"name": "cryptoRandomId()", "description": "Generates a random ID using crypto API if available, otherwise fallback to Math.random.", "scope": "", "scopeKind": ""}, {"name": "listNotes()", "description": "Fetches the list of notes from the backend if available, otherwise from localStorage.", "scope": "", "scopeKind": ""}, {"name": "createNote(payload)", "description": "Creates a new note by sending data to the backend or storing it locally.", "scope": "", "scopeKind": ""}, {"name": "updateNote(id, payload)", "description": "Updates an existing note or inserts it if not found, via backend or local storage.", "scope": "", "scopeKind": ""}, {"name": "deleteNote(id)", "description": "Deletes a note by ID via backend or local storage.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "getApiBase", "readLocal", "writeLocal", "normalizeNote"], "search-terms": ["Notes API", "localStorage fallback", "Notes management", "API client", "Notes CRUD"], "state": 2, "file_id": 20, "knowledge_revision": 94, "git_revision": "", "ctags": [{"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^const STORAGE_KEY = 'notes_app_data_v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "audio", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    audio: Array.isArray(payload?.audio) ? payload.audio : [],$/", "language": "JavaScript", "kind": "property", "scope": "createNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "audio", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    audio: Array.isArray(payload?.audio) ? payload.audio : [],$/", "language": "JavaScript", "kind": "property", "scope": "updateNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "baseData", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^  const baseData = {$/", "language": "JavaScript", "kind": "class", "scope": "createNote", "scopeKind": "class"}, {"_type": "tag", "name": "baseData", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^  const baseData = {$/", "language": "JavaScript", "kind": "class", "scope": "updateNote", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    content: payload?.content ?? '',$/", "language": "JavaScript", "kind": "property", "scope": "updateNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    content: payload?.content || '',$/", "language": "JavaScript", "kind": "property", "scope": "createNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^export async function createNote(payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload)"}, {"_type": "tag", "name": "cryptoRandomId", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^function cryptoRandomId() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^export async function deleteNote(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "drawing", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    drawing: payload?.drawing ?? null,$/", "language": "JavaScript", "kind": "property", "scope": "updateNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "drawing", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    drawing: payload?.drawing || null,$/", "language": "JavaScript", "kind": "property", "scope": "createNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^function getApiBase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "http", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^async function http(method, path, body) {$/", "language": "JavaScript", "kind": "function", "signature": "(method, path, body)"}, {"_type": "tag", "name": "images", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    images: Array.isArray(payload?.images) ? payload.images : [],$/", "language": "JavaScript", "kind": "property", "scope": "createNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "images", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    images: Array.isArray(payload?.images) ? payload.images : [],$/", "language": "JavaScript", "kind": "property", "scope": "updateNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "isBackendConfigured", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^function isBackendConfigured() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^export async function listNotes() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    method,$/", "language": "JavaScript", "kind": "field", "scope": "http.init", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^function normalizeNote(n) {$/", "language": "JavaScript", "kind": "function", "signature": "(n)"}, {"_type": "tag", "name": "readLocal", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^function readLocal() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    tags: Array.isArray(payload?.tags) ? payload.tags : [],$/", "language": "JavaScript", "kind": "property", "scope": "createNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    tags: Array.isArray(payload?.tags) ? payload.tags : [],$/", "language": "JavaScript", "kind": "property", "scope": "updateNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    title: (payload?.title ?? '').trim(),$/", "language": "JavaScript", "kind": "property", "scope": "updateNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^    title: (payload?.title || '').trim(),$/", "language": "JavaScript", "kind": "property", "scope": "createNote.baseData", "scopeKind": "class"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^export async function updateNote(id, payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, payload)"}, {"_type": "tag", "name": "writeLocal", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/api.js", "pattern": "/^function writeLocal(list) {$/", "language": "JavaScript", "kind": "function", "signature": "(list)"}], "hash": "20d52483bc06a848c9eb84b3a8eb3328", "format-version": 4, "code-base-name": "notes_app_frontend", "filename": "notes_app_frontend/src/lib/api.js", "fields": [{"name": "audio: Array.isArray(payload?.audio) ? payload.audio : [],", "scope": "createNote.baseData", "scopeKind": "class", "description": "unavailable"}, {"name": "content: payload?.content ?? '',", "scope": "updateNote.baseData", "scopeKind": "class", "description": "unavailable"}, {"name": "content: payload?.content || '',", "scope": "createNote.baseData", "scopeKind": "class", "description": "unavailable"}, {"name": "drawing: payload?.drawing ?? null,", "scope": "updateNote.baseData", "scopeKind": "class", "description": "unavailable"}, {"name": "drawing: payload?.drawing || null,", "scope": "createNote.baseData", "scopeKind": "class", "description": "unavailable"}, {"name": "images: Array.isArray(payload?.images) ? payload.images : [],", "scope": "createNote.baseData", "scopeKind": "class", "description": "unavailable"}, {"name": "method,", "scope": "http.init", "scopeKind": "class", "description": "unavailable"}, {"name": "tags: Array.isArray(payload?.tags) ? payload.tags : [],", "scope": "createNote.baseData", "scopeKind": "class", "description": "unavailable"}, {"name": "title: (payload?.title ?? '').trim(),", "scope": "updateNote.baseData", "scopeKind": "class", "description": "unavailable"}, {"name": "title: (payload?.title || '').trim(),", "scope": "createNote.baseData", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"94": ""}]}