{"is_source_file": true, "format": "JavaScript", "description": "This file contains utility functions for managing notes and notebooks using browser localStorage. It includes functions for creating, reading, updating, deleting, normalizing, importing, and exporting notes and notebooks, providing persistent local data storage for a notes application.", "external_files": [], "external_methods": ["window.localStorage.getItem", "window.localStorage.setItem", "crypto.randomUUID"], "published": ["getSelectedNotebookId", "setSelectedNotebookId", "listNotebooks", "createNotebook", "renameNotebook", "deleteNotebook", "listNotes", "createNote", "updateNote", "deleteNote", "getAllTags", "exportAllData", "importAllData"], "classes": [], "methods": [{"name": "getSelectedNotebookId()", "description": "Returns the ID of the currently selected notebook from localStorage, or an empty string if none is set.", "scope": "", "scopeKind": ""}, {"name": "setSelectedNotebookId(id)", "description": "Stores the provided notebook ID into localStorage as the selected notebook ID.", "scope": "", "scopeKind": ""}, {"name": "listNotebooks()", "description": "Retrieves the list of notebooks from localStorage, creating a default one if none exist.", "scope": "", "scopeKind": ""}, {"name": "createNotebook(name)", "description": "Creates a new notebook with a given name and stores it in localStorage.", "scope": "", "scopeKind": ""}, {"name": "renameNotebook(id, name)", "description": "Renames an existing notebook identified by ID.", "scope": "", "scopeKind": ""}, {"name": "deleteNotebook(id)", "description": "Deletes a notebook and all notes associated with it, updating localStorage accordingly.", "scope": "", "scopeKind": ""}, {"name": "listNotes(notebookId)", "description": "Retrieves notes for a specific notebook or all notes if no notebook ID is provided.", "scope": "", "scopeKind": ""}, {"name": "createNote(notePayload, notebookId)", "description": "Creates a new note with the provided payload and associates it with a notebook.", "scope": "", "scopeKind": ""}, {"name": "updateNote(id, patch)", "description": "Updates fields of an existing note identified by ID.", "scope": "", "scopeKind": ""}, {"name": "deleteNote(id)", "description": "Deletes a note by its ID.", "scope": "", "scopeKind": ""}, {"name": "getAllTags(notes)", "description": "Returns a sorted list of unique tags from a given set of notes.", "scope": "", "scopeKind": ""}, {"name": "exportAllData()", "description": "Exports all notebooks, notes, and the selected notebook ID as a schema-versioned data object.", "scope": "", "scopeKind": ""}, {"name": "importAllData(json, { mode = 'merge' } = {})", "description": "Imports data from a JSON object or string, merging or replacing existing data based on mode, and ensures data consistency.", "scope": "", "scopeKind": ""}, {"name": "ensureDefaultNotebook()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "mergeData(existing, incoming)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "normalizeNote(n)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "normalizeNotebook(n)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "readJSON(key, fallback)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "validateImportSchema(json)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "writeJSON(key, value)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["window.localStorage.getItem", "window.localStorage.setItem", "crypto.randomUUID", "new Date().toISOString()", "JSON.parse", "JSON.stringify"], "search-terms": ["localStorage notes helper", "notebook CRUD", "notes management", "data normalization", "export import notes", "local storage schema"], "state": 2, "file_id": 24, "knowledge_revision": 126, "git_revision": "", "revision_history": [{"120": ""}, {"123": ""}, {"126": ""}], "ctags": [{"_type": "tag", "name": "EXPORT_SCHEMA_VERSION", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^const EXPORT_SCHEMA_VERSION = 1; \\/\\/ bump if structure changes$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "NOTEBOOKS_KEY", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^const NOTEBOOKS_KEY = 'notes_app_notebooks_v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "NOTES_KEY", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^const NOTES_KEY = 'notes_app_data_v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "SELECTED_NOTEBOOK_KEY", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^const SELECTED_NOTEBOOK_KEY = 'notes_app_selected_notebook_v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function createNote(notePayload, notebookId) {$/", "language": "JavaScript", "kind": "function", "signature": "(notePayload, notebookId)"}, {"_type": "tag", "name": "createNotebook", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function createNotebook(name) {$/", "language": "JavaScript", "kind": "function", "signature": "(name)"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^    createdAt: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "createNotebook.nb", "scopeKind": "class"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function deleteNote(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "deleteNotebook", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function deleteNotebook(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "ensureDefaultNotebook", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^function ensureDefaultNotebook() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "exportAllData", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function exportAllData() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "exportedAt", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^    exportedAt: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "exportAllData.payload", "scopeKind": "class"}, {"_type": "tag", "name": "getAllTags", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function getAllTags(notes) {$/", "language": "JavaScript", "kind": "function", "signature": "(notes)"}, {"_type": "tag", "name": "getSelectedNotebookId", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function getSelectedNotebookId() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^    id: crypto?.randomUUID ? crypto.randomUUID() : Math.random().toString(36).slice(2),$/", "language": "JavaScript", "kind": "property", "scope": "createNotebook.nb", "scopeKind": "class"}, {"_type": "tag", "name": "importAllData", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function importAllData(json, { mode = 'merge' } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(json, { mode = 'merge' } = {})"}, {"_type": "tag", "name": "listNotebooks", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function listNotebooks() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function listNotes(notebookId) {$/", "language": "JavaScript", "kind": "function", "signature": "(notebookId)"}, {"_type": "tag", "name": "mergeData", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^function mergeData(existing, incoming) {$/", "language": "JavaScript", "kind": "function", "signature": "(existing, incoming)"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^    name: trimmed,$/", "language": "JavaScript", "kind": "property", "scope": "createNotebook.nb", "scopeKind": "class"}, {"_type": "tag", "name": "nb", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^  const nb = {$/", "language": "JavaScript", "kind": "class", "scope": "createNotebook", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^function normalizeNote(n) {$/", "language": "JavaScript", "kind": "function", "signature": "(n)"}, {"_type": "tag", "name": "normalizeNotebook", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^function normalizeNotebook(n) {$/", "language": "JavaScript", "kind": "function", "signature": "(n)"}, {"_type": "tag", "name": "notebooks", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^    notebooks: Array.isArray(notebooks) ? notebooks : [],$/", "language": "JavaScript", "kind": "property", "scope": "exportAllData.payload", "scopeKind": "class"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^    notes: Array.isArray(notes) ? notes : [],$/", "language": "JavaScript", "kind": "property", "scope": "exportAllData.payload", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "exportAllData", "scopeKind": "class"}, {"_type": "tag", "name": "readJSON", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^function readJSON(key, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, fallback)"}, {"_type": "tag", "name": "renameNotebook", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function renameNotebook(id, name) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, name)"}, {"_type": "tag", "name": "schemaVersion", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^    schemaVersion: EXPORT_SCHEMA_VERSION,$/", "language": "JavaScript", "kind": "property", "scope": "exportAllData.payload", "scopeKind": "class"}, {"_type": "tag", "name": "selectedNotebookId", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^    selectedNotebookId,$/", "language": "JavaScript", "kind": "field", "scope": "exportAllData.payload", "scopeKind": "class"}, {"_type": "tag", "name": "setSelectedNotebookId", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function setSelectedNotebookId(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^export function updateNote(id, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, patch)"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^    updatedAt: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "createNotebook.nb", "scopeKind": "class"}, {"_type": "tag", "name": "validateImportSchema", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^function validateImportSchema(json) {$/", "language": "JavaScript", "kind": "function", "signature": "(json)"}, {"_type": "tag", "name": "writeJSON", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/lib/storage.js", "pattern": "/^function writeJSON(key, value) {$/", "language": "JavaScript", "kind": "function", "signature": "(key, value)"}], "hash": "3b287cac3395f4879115c1a308d48af8", "format-version": 4, "code-base-name": "notes_app_frontend", "filename": "notes_app_frontend/src/lib/storage.js", "fields": [{"name": "createdAt: new Date().toISOString(),", "scope": "createNotebook.nb", "scopeKind": "class", "description": "unavailable"}, {"name": "exportedAt: new Date().toISOString(),", "scope": "exportAllData.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "id: crypto?.randomUUID ? crypto.randomUUID() : Math.random().toString(36).slice(2),", "scope": "createNotebook.nb", "scopeKind": "class", "description": "unavailable"}, {"name": "name: trimmed,", "scope": "createNotebook.nb", "scopeKind": "class", "description": "unavailable"}, {"name": "notebooks: Array.isArray(notebooks) ? notebooks : [],", "scope": "exportAllData.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "notes: Array.isArray(notes) ? notes : [],", "scope": "exportAllData.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "schemaVersion: EXPORT_SCHEMA_VERSION,", "scope": "exportAllData.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "selectedNotebookId,", "scope": "exportAllData.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "updatedAt: new Date().toISOString(),", "scope": "createNotebook.nb", "scopeKind": "class", "description": "unavailable"}]}