{"is_source_file": true, "format": "JavaScript (React)", "description": "A React component implementing a modal dialog for creating and editing notes, including handling of text, tags, images, and drawings.", "external_files": ["./DrawingCanvas"], "external_methods": [], "published": [], "classes": [], "methods": [{"name": "NoteModal({ isOpen, initial, onCancel, onSave })", "description": "React functional component for a note creation/editing modal with support for text, tags, attachments, and drawing.", "scope": "", "scopeKind": ""}, {"name": "addTagToken", "description": "Adds a new tag token to the tags list if it passes validation."}, {"name": "onTagKeyDown", "description": "Handles key events for the tag input field, enabling tag addition and removal."}, {"name": "removeTag", "description": "Removes a specified tag from the tags list."}, {"name": "bytesToStr(n)", "description": "Converts byte sizes into human-readable strings.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "readFileAsDataUrl(file)", "description": "Reads a file as a Data URL using FileReader.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "resizeImageIfNeeded(dataUrl, type, maxEdge = 1600, quality = 0.85)", "description": "Resizes images to a maximum edge size unless the image is a GIF.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "validateFiles(files)", "description": "Validates files against type and size constraints.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "handleFiles(selected)", "description": "Processes selected files by validating, resizing, and adding them to state.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "onFileChange", "description": "Handles changes in file input, initiating file processing."}, {"name": "onDrop", "description": "Handles drag-and-drop of files into the attachment zone."}, {"name": "onDragOver", "description": "Manages drag over events for the dropzone, adding visual feedback."}, {"name": "onDragLeave", "description": "Handles drag leave events, removing visual feedback from the dropzone."}, {"name": "removeImage", "description": "Removes an image from the attachments list."}, {"name": "moveImageUp", "description": "Moves an image up in the attachment list."}, {"name": "moveImageDown", "description": "Moves an image down in the attachment list."}, {"name": "submit", "description": "Validates form data and invokes onSave callback with the note data."}], "calls": ["React.useEffect", "React.useRef", "React.useState", "setTimeout", "document.addEventListener", "document.removeEventListener", "setTitle", "setContent", "setTags", "setTagInput", "setError", "setSketchOpen", "setDrawing", "setImages", "setAttachOpen", "setAttachError", "setTimeout", "crypto.randomUUID", "resizeImageIfNeeded", "readFileAsDataUrl"], "search-terms": ["NoteModal", "React modal note editor", "attachment image management", "drawing canvas integration", "tag input handling", "file upload resize", "drag and drop images", "edit/create note React"], "state": 2, "file_id": 17, "knowledge_revision": 72, "git_revision": "c02d887afaee6487f725278fb8d6b2b536c1d58e", "revision_history": [{"37": ""}, {"42": "fda7c758ce81e4024212106bd5b939b9523e607d"}, {"43": "fda7c758ce81e4024212106bd5b939b9523e607d"}, {"57": "bb7af4cddf1ce26923a48511c07a09e7dcd8990d"}, {"62": "07587803f06099c8b8ef25dca36f5fcced547887"}, {"64": "07587803f06099c8b8ef25dca36f5fcced547887"}, {"65": "07587803f06099c8b8ef25dca36f5fcced547887"}, {"72": "c02d887afaee6487f725278fb8d6b2b536c1d58e"}], "ctags": [{"_type": "tag", "name": "${id}-title", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^      aria-labelledby={`${id}-title`}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.aria", "scopeKind": "class"}, {"_type": "tag", "name": "8", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                rows={8}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.rows", "scopeKind": "class"}, {"_type": "tag", "name": "NoteModal", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^export default function NoteModal({ isOpen, initial, onCancel, onSave }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ isOpen, initial, onCancel, onSave })"}, {"_type": "tag", "name": "attachOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  aria-expanded={attachOpen}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.aria", "scopeKind": "class"}, {"_type": "tag", "name": "attachOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  title={attachOpen ? 'Hide attachments' : 'Show attachments'}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.title", "scopeKind": "class"}, {"_type": "tag", "name": "bytesToStr", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function bytesToStr(n) {$/", "language": "JavaScript", "kind": "function", "signature": "(n)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "closeRef", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^            ref={closeRef}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.ref", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                value={content}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.value", "scopeKind": "class"}, {"_type": "tag", "name": "handleFiles", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function handleFiles(selected) {$/", "language": "JavaScript", "kind": "function", "signature": "(selected)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "onCancel", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^            onClick={onCancel}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "onTagKeyDown", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    onKeyDown={onTagKeyDown}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.onKeyDown", "scopeKind": "class"}, {"_type": "tag", "name": "readFileAsDataUrl", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function readFileAsDataUrl(file) {$/", "language": "JavaScript", "kind": "function", "signature": "(file)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "resizeImageIfNeeded", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function resizeImageIfNeeded(dataUrl, type, maxEdge = 1600, quality = 0.85) {$/", "language": "JavaScript", "kind": "function", "signature": "(dataUrl, type, maxEdge = 1600, quality = 0.85)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "sketchOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  aria-expanded={sketchOpen}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.aria", "scopeKind": "class"}, {"_type": "tag", "name": "sketchOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  title={sketchOpen ? 'Hide sketch' : 'Show sketch'}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.title", "scopeKind": "class"}, {"_type": "tag", "name": "tagInput", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    value={tagInput}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.value", "scopeKind": "class"}, {"_type": "tag", "name": "tagInputRef", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    ref={tagInputRef}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.ref", "scopeKind": "class"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    placeholder={tags.length ? 'Add tag\u2026' : 'e.g. work, personal'}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.placeholder", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                value={title}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.value", "scopeKind": "class"}, {"_type": "tag", "name": "titleRef", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                ref={titleRef}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.ref", "scopeKind": "class"}, {"_type": "tag", "name": "validateFiles", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function validateFiles(files) {$/", "language": "JavaScript", "kind": "function", "signature": "(files)", "scope": "NoteModal", "scopeKind": "function"}], "hash": "6827004933551322e0ae11488507c196", "format-version": 4, "code-base-name": "notes_app_frontend", "filename": "notes_app_frontend/src/components/NoteModal.js", "fields": [{"name": "aria-labelledby={`${id}-title`}", "scope": "NoteModal.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "rows={8}", "scope": "NoteModal.rows", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-expanded={attachOpen}", "scope": "NoteModal.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={attachOpen ? 'Hide attachments' : 'Show attachments'}", "scope": "NoteModal.title", "scopeKind": "class", "description": "unavailable"}, {"name": "ref={closeRef}", "scope": "NoteModal.ref", "scopeKind": "class", "description": "unavailable"}, {"name": "value={content}", "scope": "NoteModal.value", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={onCancel}", "scope": "NoteModal.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onKeyDown={onTagKeyDown}", "scope": "NoteModal.onKeyDown", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-expanded={sketchOpen}", "scope": "NoteModal.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={sketchOpen ? 'Hide sketch' : 'Show sketch'}", "scope": "NoteModal.title", "scopeKind": "class", "description": "unavailable"}, {"name": "value={tagInput}", "scope": "NoteModal.value", "scopeKind": "class", "description": "unavailable"}, {"name": "ref={tagInputRef}", "scope": "NoteModal.ref", "scopeKind": "class", "description": "unavailable"}, {"name": "placeholder={tags.length ? 'Add tag\u2026' : 'e.g. work, personal'}", "scope": "NoteModal.placeholder", "scopeKind": "class", "description": "unavailable"}, {"name": "value={title}", "scope": "NoteModal.value", "scopeKind": "class", "description": "unavailable"}, {"name": "ref={titleRef}", "scope": "NoteModal.ref", "scopeKind": "class", "description": "unavailable"}]}