{"is_source_file": true, "format": "JavaScript", "description": "This file defines a React component 'NoteModal' which provides a comprehensive modal interface for creating and editing notes. It includes features such as title and content editing, tagging, attachments (images), sketches, and voice notes (audio recording and upload). The component manages various states, handles file uploads with resizing and validation, controls media recording permissions, and provides user interactions like focus handling and keyboard shortcuts.", "external_files": ["./DrawingCanvas"], "external_methods": ["DrawingCanvas.getDataUrl"], "published": [], "classes": [{"name": "AudioClipRow", "description": "A React component that renders a single audio clip with controls for playback, renaming, and deletion."}], "methods": [{"name": "addTagToken", "description": "Adds a new tag to the tags list if not a duplicate and not empty."}, {"name": "onTagKeyDown", "description": "Handles key down events in the tag input to add tags on Enter or comma, or delete last tag on Backspace."}, {"name": "removeTag", "description": "Removes a specified tag from the tags list."}, {"name": "bytesToStr(n)", "description": "Converts byte size into a human-readable string.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "readFileAsDataUrl(file)", "description": "Reads a File object as a Data URL.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "resizeImageIfNeeded(dataUrl, type, maxEdge = 1600, quality = 0.85)", "description": "Resizes images exceeding the maximum edge size while preserving aspect ratio and format.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "validateFiles(files)", "description": "Validates selected files against type and size constraints.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "handleFiles(selected)", "description": "Processes and adds valid selected files as images, resizing and validating them.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "onFileChange", "description": "Handles change event for file input, initiates file handling."}, {"name": "onDrop", "description": "Handles files dropped in the drag-and-drop zone."}, {"name": "onDragOver", "description": "Handles drag over event to provide visual feedback."}, {"name": "onDragLeave", "description": "Removes drag-over visual state."}, {"name": "removeImage", "description": "Removes an image from the attachment list by ID."}, {"name": "moveImageUp", "description": "Moves an image up in the attachment list."}, {"name": "moveImageDown", "description": "Moves an image down in the attachment list."}, {"name": "handleAudioFiles(fileList)", "description": "Processes and adds uploaded audio files, validating type and size.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "removeClip(id)", "description": "Removes an audio clip by ID.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "renameClip(id, name)", "description": "Renames an audio clip.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "submit", "description": "Validates form and invokes onSave callback with note data."}, {"name": "startRecording()", "description": "Begins audio recording, requesting microphone permissions and handling media recorder setup.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "stopRecording()", "description": "Stops ongoing audio recording.", "scope": "NoteModal", "scopeKind": "function"}, {"name": "AudioClipRow({ clip, onDelete, onRename })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "NoteModal({ isOpen, initial, onCancel, onSave })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ensureMicPermission()", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "msToClock(ms)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "pickSupportedMime()", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "stopStream(stream)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}], "calls": ["document.addEventListener", "document.removeEventListener", "setInterval", "clearInterval", "MediaRecorder.isTypeSupported", "navigator.mediaDevices.getUserMedia", "navigator.mediaDevices.getUserMedia", "stream.getTracks().forEach", "el.play", "el.pause", "audioRef.current.src", "DrawingCanvas.getDataUrl", "Crypto.randomUUID"], "search-terms": ["React NoteModal", "audio recording", "image attachment", "drawing sketch", "tag input", "voice notes", "media handling", "file validation", "image resizing", "drag-and-drop images"], "state": 2, "file_id": 17, "knowledge_revision": 137, "git_revision": "ff1f9d4f4d50d7fc4d5cc19b4389c1a01b9ffe32", "revision_history": [{"37": ""}, {"42": "fda7c758ce81e4024212106bd5b939b9523e607d"}, {"43": "fda7c758ce81e4024212106bd5b939b9523e607d"}, {"57": "bb7af4cddf1ce26923a48511c07a09e7dcd8990d"}, {"62": "07587803f06099c8b8ef25dca36f5fcced547887"}, {"64": "07587803f06099c8b8ef25dca36f5fcced547887"}, {"65": "07587803f06099c8b8ef25dca36f5fcced547887"}, {"72": "c02d887afaee6487f725278fb8d6b2b536c1d58e"}, {"80": "ec0f6990ff9bc0cbb4874f46ae1861a70d21a927"}, {"81": "ec0f6990ff9bc0cbb4874f46ae1861a70d21a927"}, {"82": "ec0f6990ff9bc0cbb4874f46ae1861a70d21a927"}, {"90": "73512e4aee151f3187e1458f21879b73b6431112"}, {"136": "ff1f9d4f4d50d7fc4d5cc19b4389c1a01b9ffe32"}, {"137": "ff1f9d4f4d50d7fc4d5cc19b4389c1a01b9ffe32"}], "ctags": [{"_type": "tag", "name": "${id}-title", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^      aria-labelledby={`${id}-title`}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.aria", "scopeKind": "class"}, {"_type": "tag", "name": "AudioClipRow", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^function AudioClipRow({ clip, onDelete, onRename }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ clip, onDelete, onRename })"}, {"_type": "tag", "name": "NoteModal", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^export default function NoteModal({ isOpen, initial, onCancel, onSave }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ isOpen, initial, onCancel, onSave })"}, {"_type": "tag", "name": "attachOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  aria-expanded={attachOpen}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "attachOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  title={attachOpen ? 'Hide attachments' : 'Show attachments'}$/", "language": "JavaScript", "kind": "field", "scope": "title", "scopeKind": "class"}, {"_type": "tag", "name": "audioOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  aria-expanded={audioOpen}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "audioOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  title={audioOpen ? 'Hide voice notes' : 'Show voice notes'}$/", "language": "JavaScript", "kind": "field", "scope": "title", "scopeKind": "class"}, {"_type": "tag", "name": "bytesToStr", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function bytesToStr(n) {$/", "language": "JavaScript", "kind": "function", "signature": "(n)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "closeRef", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^              ref={closeRef}$/", "language": "JavaScript", "kind": "field", "scope": "ref", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  value={content}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "ensureMicPermission", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function ensureMicPermission() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "handleAudioFiles", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function handleAudioFiles(fileList) {$/", "language": "JavaScript", "kind": "function", "signature": "(fileList)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "handleFiles", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function handleFiles(selected) {$/", "language": "JavaScript", "kind": "function", "signature": "(selected)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^            id,$/", "language": "JavaScript", "kind": "field", "scope": "clip", "scopeKind": "class"}, {"_type": "tag", "name": "msToClock", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function msToClock(ms) {$/", "language": "JavaScript", "kind": "function", "signature": "(ms)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^          value={name}$/", "language": "JavaScript", "kind": "field", "scope": "AudioClipRow.value", "scopeKind": "class"}, {"_type": "tag", "name": "onCancel", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^              onClick={onCancel}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "onDelete", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^        onClick={onDelete}$/", "language": "JavaScript", "kind": "field", "scope": "AudioClipRow.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "onTagKeyDown", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    onKeyDown={onTagKeyDown}$/", "language": "JavaScript", "kind": "field", "scope": "onKeyDown", "scopeKind": "class"}, {"_type": "tag", "name": "pickSupportedMime", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function pickSupportedMime() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "pinned", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^              aria-label={pinned ? 'Unpin this note' : 'Pin this note'}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.aria", "scopeKind": "class"}, {"_type": "tag", "name": "pinned", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^              aria-pressed={pinned}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.aria", "scopeKind": "class"}, {"_type": "tag", "name": "pinned", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^              title={pinned ? 'Unpin' : 'Pin'}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.title", "scopeKind": "class"}, {"_type": "tag", "name": "playing", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^        aria-label={playing ? 'Pause' : 'Play'}$/", "language": "JavaScript", "kind": "field", "scope": "AudioClipRow.aria", "scopeKind": "class"}, {"_type": "tag", "name": "playing", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^        title={playing ? 'Pause' : 'Play'}$/", "language": "JavaScript", "kind": "field", "scope": "AudioClipRow.title", "scopeKind": "class"}, {"_type": "tag", "name": "readFileAsDataUrl", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function readFileAsDataUrl(file) {$/", "language": "JavaScript", "kind": "function", "signature": "(file)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "removeClip", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function removeClip(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "renameClip", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function renameClip(id, name) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, name)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "resizeImageIfNeeded", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function resizeImageIfNeeded(dataUrl, type, maxEdge = 1600, quality = 0.85) {$/", "language": "JavaScript", "kind": "function", "signature": "(dataUrl, type, maxEdge = 1600, quality = 0.85)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "sketchOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  aria-expanded={sketchOpen}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "sketchOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  title={sketchOpen ? 'Hide sketch' : 'Show sketch'}$/", "language": "JavaScript", "kind": "field", "scope": "title", "scopeKind": "class"}, {"_type": "tag", "name": "startRecording", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function startRecording() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "stopRecording", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function stopRecording() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "stopStream", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function stopStream(stream) {$/", "language": "JavaScript", "kind": "function", "signature": "(stream)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "tagInput", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    value={tagInput}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "tagInputRef", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    ref={tagInputRef}$/", "language": "JavaScript", "kind": "field", "scope": "ref", "scopeKind": "class"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    placeholder={tags.length ? 'Add tag\u2026' : 'e.g. work, personal'}$/", "language": "JavaScript", "kind": "field", "scope": "placeholder", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                value={title}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "titleRef", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                ref={titleRef}$/", "language": "JavaScript", "kind": "field", "scope": "ref", "scopeKind": "class"}, {"_type": "tag", "name": "toggle", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^        onClick={toggle}$/", "language": "JavaScript", "kind": "field", "scope": "AudioClipRow.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "validateFiles", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function validateFiles(files) {$/", "language": "JavaScript", "kind": "function", "signature": "(files)", "scope": "NoteModal", "scopeKind": "function"}], "hash": "12fae05d0bd54f766c52b985f3b90e09", "format-version": 4, "code-base-name": "notes_app_frontend", "filename": "notes_app_frontend/src/components/NoteModal.js", "fields": [{"name": "aria-labelledby={`${id}-title`}", "scope": "NoteModal.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-expanded={attachOpen}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={attachOpen ? 'Hide attachments' : 'Show attachments'}", "scope": "title", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-expanded={audioOpen}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={audioOpen ? 'Hide voice notes' : 'Show voice notes'}", "scope": "title", "scopeKind": "class", "description": "unavailable"}, {"name": "ref={closeRef}", "scope": "ref", "scopeKind": "class", "description": "unavailable"}, {"name": "value={content}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "id,", "scope": "clip", "scopeKind": "class", "description": "unavailable"}, {"name": "value={name}", "scope": "AudioClipRow.value", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={onCancel}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={onDelete}", "scope": "AudioClipRow.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onKeyDown={onTagKeyDown}", "scope": "onKeyDown", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-label={pinned ? 'Unpin this note' : 'Pin this note'}", "scope": "NoteModal.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-pressed={pinned}", "scope": "NoteModal.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={pinned ? 'Unpin' : 'Pin'}", "scope": "NoteModal.title", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-label={playing ? 'Pause' : 'Play'}", "scope": "AudioClipRow.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={playing ? 'Pause' : 'Play'}", "scope": "AudioClipRow.title", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-expanded={sketchOpen}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={sketchOpen ? 'Hide sketch' : 'Show sketch'}", "scope": "title", "scopeKind": "class", "description": "unavailable"}, {"name": "value={tagInput}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "ref={tagInputRef}", "scope": "ref", "scopeKind": "class", "description": "unavailable"}, {"name": "placeholder={tags.length ? 'Add tag\u2026' : 'e.g. work, personal'}", "scope": "placeholder", "scopeKind": "class", "description": "unavailable"}, {"name": "value={title}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "ref={titleRef}", "scope": "ref", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={toggle}", "scope": "AudioClipRow.onClick", "scopeKind": "class", "description": "unavailable"}]}