{"is_source_file": true, "format": "JavaScript (React component)", "description": "A React component implementing a modal dialog for creating and editing notes that supports features like title, content, tags, attachments (images), sketches, and voice notes (audio recordings and uploads). The component manages complex internal state, handles file uploads and resizing, audio recording via MediaRecorder API, focus management, and input validation.", "external_files": ["./DrawingCanvas"], "external_methods": ["MediaRecorder.isTypeSupported"], "published": ["NoteModal", "AudioClipRow"], "classes": [], "methods": [{"name": "AudioClipRow({ clip, onDelete, onRename })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "NoteModal({ isOpen, initial, onCancel, onSave })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bytesToStr(n)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "ensureMicPermission()", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "handleAudioFiles(fileList)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "handleFiles(selected)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "msToClock(ms)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "pickSupportedMime()", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "readFileAsDataUrl(file)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "removeClip(id)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "renameClip(id, name)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "resizeImageIfNeeded(dataUrl, type, maxEdge = 1600, quality = 0.85)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "startRecording()", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "stopRecording()", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "stopStream(stream)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}, {"name": "validateFiles(files)", "scope": "NoteModal", "scopeKind": "function", "description": "unavailable"}], "calls": ["React.useEffect", "React.useRef", "React.useState", "DrawingCanvas", "MediaRecorder.isTypeSupported", "document.activeElement", "setTimeout", "clearInterval", "setInterval", "FileReader.readAsDataURL", "Image.onload", "Image.onerror", "canvas.toDataURL", "document.addEventListener", "document.removeEventListener", "navigator.mediaDevices.getUserMedia", "stream.getTracks", "MediaRecorder.start", "MediaRecorder.stop", "MediaRecorder.ondataavailable", "MediaRecorder.onerror", "MediaRecorder.onstop", "audioRef.current.play", "audioRef.current.pause", "audioRef.current.addEventListener", "audioRef.current.removeEventListener"], "search-terms": ["NoteModal React", "audio recording", "image attachment", "drawing canvas", "tag input", "video and audio encoding", "file resize", "drag and drop images", "voice notes", "modal dialog React"], "state": 2, "file_id": 17, "knowledge_revision": 90, "git_revision": "73512e4aee151f3187e1458f21879b73b6431112", "revision_history": [{"37": ""}, {"42": "fda7c758ce81e4024212106bd5b939b9523e607d"}, {"43": "fda7c758ce81e4024212106bd5b939b9523e607d"}, {"57": "bb7af4cddf1ce26923a48511c07a09e7dcd8990d"}, {"62": "07587803f06099c8b8ef25dca36f5fcced547887"}, {"64": "07587803f06099c8b8ef25dca36f5fcced547887"}, {"65": "07587803f06099c8b8ef25dca36f5fcced547887"}, {"72": "c02d887afaee6487f725278fb8d6b2b536c1d58e"}, {"80": "ec0f6990ff9bc0cbb4874f46ae1861a70d21a927"}, {"81": "ec0f6990ff9bc0cbb4874f46ae1861a70d21a927"}, {"82": "ec0f6990ff9bc0cbb4874f46ae1861a70d21a927"}, {"90": "73512e4aee151f3187e1458f21879b73b6431112"}], "ctags": [{"_type": "tag", "name": "${id}-title", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^      aria-labelledby={`${id}-title`}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.aria", "scopeKind": "class"}, {"_type": "tag", "name": "8", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                rows={8}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.rows", "scopeKind": "class"}, {"_type": "tag", "name": "AudioClipRow", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^function AudioClipRow({ clip, onDelete, onRename }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ clip, onDelete, onRename })"}, {"_type": "tag", "name": "NoteModal", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^export default function NoteModal({ isOpen, initial, onCancel, onSave }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ isOpen, initial, onCancel, onSave })"}, {"_type": "tag", "name": "attachOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  aria-expanded={attachOpen}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.aria", "scopeKind": "class"}, {"_type": "tag", "name": "attachOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  title={attachOpen ? 'Hide attachments' : 'Show attachments'}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.title", "scopeKind": "class"}, {"_type": "tag", "name": "audioOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  aria-expanded={audioOpen}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.aria", "scopeKind": "class"}, {"_type": "tag", "name": "audioOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  title={audioOpen ? 'Hide voice notes' : 'Show voice notes'}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.title", "scopeKind": "class"}, {"_type": "tag", "name": "bytesToStr", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function bytesToStr(n) {$/", "language": "JavaScript", "kind": "function", "signature": "(n)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "closeRef", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^            ref={closeRef}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.ref", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                value={content}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.value", "scopeKind": "class"}, {"_type": "tag", "name": "ensureMicPermission", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function ensureMicPermission() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "handleAudioFiles", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function handleAudioFiles(fileList) {$/", "language": "JavaScript", "kind": "function", "signature": "(fileList)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "handleFiles", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function handleFiles(selected) {$/", "language": "JavaScript", "kind": "function", "signature": "(selected)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^            id,$/", "language": "JavaScript", "kind": "field", "scope": "clip", "scopeKind": "class"}, {"_type": "tag", "name": "msToClock", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function msToClock(ms) {$/", "language": "JavaScript", "kind": "function", "signature": "(ms)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^          value={name}$/", "language": "JavaScript", "kind": "field", "scope": "AudioClipRow.value", "scopeKind": "class"}, {"_type": "tag", "name": "onCancel", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^            onClick={onCancel}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "onDelete", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^        onClick={onDelete}$/", "language": "JavaScript", "kind": "field", "scope": "AudioClipRow.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "onTagKeyDown", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    onKeyDown={onTagKeyDown}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.onKeyDown", "scopeKind": "class"}, {"_type": "tag", "name": "pickSupportedMime", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function pickSupportedMime() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "playing", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^        aria-label={playing ? 'Pause' : 'Play'}$/", "language": "JavaScript", "kind": "field", "scope": "AudioClipRow.aria", "scopeKind": "class"}, {"_type": "tag", "name": "playing", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^        title={playing ? 'Pause' : 'Play'}$/", "language": "JavaScript", "kind": "field", "scope": "AudioClipRow.title", "scopeKind": "class"}, {"_type": "tag", "name": "readFileAsDataUrl", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function readFileAsDataUrl(file) {$/", "language": "JavaScript", "kind": "function", "signature": "(file)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "removeClip", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function removeClip(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "renameClip", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function renameClip(id, name) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, name)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "resizeImageIfNeeded", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function resizeImageIfNeeded(dataUrl, type, maxEdge = 1600, quality = 0.85) {$/", "language": "JavaScript", "kind": "function", "signature": "(dataUrl, type, maxEdge = 1600, quality = 0.85)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "sketchOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  aria-expanded={sketchOpen}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.aria", "scopeKind": "class"}, {"_type": "tag", "name": "sketchOpen", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                  title={sketchOpen ? 'Hide sketch' : 'Show sketch'}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.title", "scopeKind": "class"}, {"_type": "tag", "name": "startRecording", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  async function startRecording() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "stopRecording", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function stopRecording() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "stopStream", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function stopStream(stream) {$/", "language": "JavaScript", "kind": "function", "signature": "(stream)", "scope": "NoteModal", "scopeKind": "function"}, {"_type": "tag", "name": "tagInput", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    value={tagInput}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.value", "scopeKind": "class"}, {"_type": "tag", "name": "tagInputRef", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    ref={tagInputRef}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.ref", "scopeKind": "class"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                    placeholder={tags.length ? 'Add tag\u2026' : 'e.g. work, personal'}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.placeholder", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                value={title}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.value", "scopeKind": "class"}, {"_type": "tag", "name": "titleRef", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^                ref={titleRef}$/", "language": "JavaScript", "kind": "field", "scope": "NoteModal.ref", "scopeKind": "class"}, {"_type": "tag", "name": "toggle", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^        onClick={toggle}$/", "language": "JavaScript", "kind": "field", "scope": "AudioClipRow.onClick", "scopeKind": "class"}, {"_type": "tag", "name": "validateFiles", "path": "/home/kavia/workspace/code-generation/simple-notes-manager-46153-46162/notes_app_frontend/src/components/NoteModal.js", "pattern": "/^  function validateFiles(files) {$/", "language": "JavaScript", "kind": "function", "signature": "(files)", "scope": "NoteModal", "scopeKind": "function"}], "hash": "8d82736efd67a8ff97aee9db343d1c46", "format-version": 4, "code-base-name": "notes_app_frontend", "filename": "notes_app_frontend/src/components/NoteModal.js", "fields": [{"name": "aria-labelledby={`${id}-title`}", "scope": "NoteModal.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "rows={8}", "scope": "NoteModal.rows", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-expanded={attachOpen}", "scope": "NoteModal.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={attachOpen ? 'Hide attachments' : 'Show attachments'}", "scope": "NoteModal.title", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-expanded={audioOpen}", "scope": "NoteModal.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={audioOpen ? 'Hide voice notes' : 'Show voice notes'}", "scope": "NoteModal.title", "scopeKind": "class", "description": "unavailable"}, {"name": "ref={closeRef}", "scope": "NoteModal.ref", "scopeKind": "class", "description": "unavailable"}, {"name": "value={content}", "scope": "NoteModal.value", "scopeKind": "class", "description": "unavailable"}, {"name": "id,", "scope": "clip", "scopeKind": "class", "description": "unavailable"}, {"name": "value={name}", "scope": "AudioClipRow.value", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={onCancel}", "scope": "NoteModal.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={onDelete}", "scope": "AudioClipRow.onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "onKeyDown={onTagKeyDown}", "scope": "NoteModal.onKeyDown", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-label={playing ? 'Pause' : 'Play'}", "scope": "AudioClipRow.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={playing ? 'Pause' : 'Play'}", "scope": "AudioClipRow.title", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-expanded={sketchOpen}", "scope": "NoteModal.aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={sketchOpen ? 'Hide sketch' : 'Show sketch'}", "scope": "NoteModal.title", "scopeKind": "class", "description": "unavailable"}, {"name": "value={tagInput}", "scope": "NoteModal.value", "scopeKind": "class", "description": "unavailable"}, {"name": "ref={tagInputRef}", "scope": "NoteModal.ref", "scopeKind": "class", "description": "unavailable"}, {"name": "placeholder={tags.length ? 'Add tag\u2026' : 'e.g. work, personal'}", "scope": "NoteModal.placeholder", "scopeKind": "class", "description": "unavailable"}, {"name": "value={title}", "scope": "NoteModal.value", "scopeKind": "class", "description": "unavailable"}, {"name": "ref={titleRef}", "scope": "NoteModal.ref", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={toggle}", "scope": "AudioClipRow.onClick", "scopeKind": "class", "description": "unavailable"}]}